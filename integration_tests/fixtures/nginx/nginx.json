{
  "consul": "consul:8500",
  "onStart": [
    "consul-template", "-once", "-consul", "consul:8500", "-template",
    "/etc/containerbuddy/nginx.ctmpl:/etc/nginx/nginx.conf"
  ],
  "services": [
    {
      "name": "nginx",
      "port": 80,
      "interfaces": ["eth0"],
      "health": "/usr/bin/curl --fail -s -o /dev/null http://localhost/health.txt",
      "poll": 10,
      "ttl": 25
    }
  ],
  "backends": [
    {
      "name": "app",
      "poll": 7,
      "onChange": [
          "consul-template", "-once", "-consul", "consul:8500", "-template",
          "/etc/containerbuddy/nginx.ctmpl:/etc/nginx/nginx.conf:nginx -s reload"
      ]
    }
  ]
}
